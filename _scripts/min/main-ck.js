function Video(o,e){var t=this,n=o,i=$(o),a=854,d=480,s=a/d,l=i.parent().find(".vid-controls"),c,r=function(){o.controls=!1,e.clickPlayPause&&(i.click(function(){t.togglePlayPause(n)}),l.click(function(o){o.preventDefault(),console.log("buttun CLICKED"),t.togglePlayPause(n)})),n.addEventListener("timeupdate",t.timeController),n.addEventListener("loadedmetadata",function(){c=n.duration}),n.addEventListener("ended",function(){console.log("video ended"),l.fadeIn(),n.load()})};t.togglePlayPause=function(){n.paused?(n.play(),l.fadeOut()):n.ended?console.log("video ended should restart",n.currentTime):(n.pause(),l.fadeIn())},t.getVideoHeight=function(){return vidHeight=Math.round($window.width()/s)},t.timeController=function(){var o=n.currentTime;console.log("time controler"+o,c)},r()}function update(){var o=$window.scrollTop(),e=$window.height();$(".section").each(function(){var e=$(this);if(void 0!==e.data("bg-ratio")){var t=+e.data("bg-ratio"),n=void 0!==e.data("bg-offset")?+e.data("bg-offset"):0,i=parseInt(e.css("background-position-y"),10),a=$(this).position().top,d=o-a,s=Math.round(n+d*t);e.css("backgroundPosition","50% "+s+"%")}})}function scrollTo(o){event.preventDefault();var e=o.attr("href"),t=$("body").find(e).position().top,n=$("header").height();console.log(t);var i=function(){$("body,html").animate({scrollTop:t-n},1e3)}()}function adjustToWindow(){$("#sec-1").css("min-height",vids[0].getVideoHeight())}function reveal(){$(this).hide(),$(this).next().fadeToggle(),console.log($(this))}var $window=$(window),$playBtn=$(".play-btn"),vids=[];$(document).ready(function(){$("body").scrollspy({target:"#navbar",offset:200}),$("body").scrollspy({target:"#sideNavBar",offset:200}),$("video").each(function(o,e){vids.push(new Video(e,{clickPlayPause:!0}))}),$window.resize(adjustToWindow),$window.scroll(update),adjustToWindow(),$(".reveal").on("click","a",reveal),$(".nav").on("click","a",function(o){scrollTo($(this))}),console.log("listo")});